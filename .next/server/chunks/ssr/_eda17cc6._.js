module.exports=[35573,a=>{"use strict";let b=(0,a.i(61237).default)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);a.s(["Heart",()=>b],35573)},71074,a=>{"use strict";let b=(0,a.i(61237).default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);a.s(["Bell",()=>b],71074)},85102,a=>{"use strict";let b=(0,a.i(61237).default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);a.s(["BookOpen",()=>b],85102)},99009,a=>{"use strict";let b=(0,a.i(61237).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);a.s(["TrendingUp",()=>b],99009)},20731,a=>{"use strict";var b=a.i(17188),c=a.i(68407),d=a.i(36915),e=a.i(4743),f=a.i(11807),g=a.i(3130),h=a.i(40695),i=a.i(51494),j=a.i(35573),k=a.i(6665),l=a.i(96926),m=a.i(1556),n=a.i(99009),o=a.i(11292),p=a.i(71074),q=a.i(85102);function r({email:a}){let[d,e]=(0,c.useState)([]),[f,i]=(0,c.useState)(!1);async function j(){if(a){i(!0);try{let[b,c,d]=await Promise.all([fetch(`/api/suggestions?email=${encodeURIComponent(a)}`),fetch(`/api/volunteers?email=${encodeURIComponent(a)}`),fetch("/api/announcements")]),[f,g,h]=await Promise.all([b.json().catch(()=>({})),c.json().catch(()=>({})),d.json().catch(()=>({}))]),i=(f?.suggestions||[]).map(a=>({id:`s-${a.id}`,type:"suggestion",title:`${a.type} • ${a.name||a.email}`,body:a.adminResponse?`Response: ${a.adminResponse}`:a.message||"",when:a.respondedAt||a.createdAt||""})),j=(g?.applications||[]).map(a=>({id:`v-${a.id}`,type:"volunteer",title:`Volunteer • ${a.roleTitle||a.roleId||""}`,body:a.adminMessage||`Status: ${a.status||""}`,when:a.respondedAt||a.createdAt||""})),k=(h?.announcements||[]).map(a=>({id:`a-${a.id}`,type:"announcement",title:a.title||"Announcement",body:a.content||"",when:a.postedAt||a.createdAt||""})),l=[...i,...j,...k];l.sort((a,b)=>(new Date(b.when).getTime()||0)-(new Date(a.when).getTime()||0)),e(l)}catch(a){console.error("Failed to load inbox",a)}finally{i(!1)}}}return((0,c.useEffect)(()=>{let b=!0;if(!a)return;j();let c=setInterval(()=>{b&&j()},1e4);return()=>{b=!1,clearInterval(c)}},[a]),a)?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Inbox"}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(h.Button,{size:"sm",onClick:()=>j(),disabled:f,children:f?"Refreshing…":"Refresh"})})]}),0===d.length&&(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"No messages yet."}),(0,b.jsx)("div",{className:"space-y-3",children:d.map(a=>(0,b.jsx)(g.Card,{className:"p-3",children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-700 font-semibold",children:a.title}),(0,b.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:a.body}),(0,b.jsx)("div",{className:"text-xs text-gray-400 mt-2",children:a.when?new Date(a.when).toLocaleString():""})]})})},a.id))})]}):(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"No email configured"})}let s=[{title:"Total Donations",value:"$2,450",change:"+12%",icon:l.DollarSign,color:"text-green-600"},{title:"Volunteer Hours",value:"180",change:"+8h",icon:k.Users,color:"text-blue-600"},{title:"Blog Articles",value:"24",change:"Last 3 mo",icon:q.BookOpen,color:"text-purple-600"},{title:"Upcoming Events",value:"5",change:"This month",icon:m.Calendar,color:"text-orange-600"}],t=[{type:"donation",message:"You donated $50",time:"2 hours ago",icon:j.Heart},{type:"volunteer",message:"Volunteer event next Sunday",time:"5 hours ago",icon:k.Users},{type:"sermon",message:"New sermon posted",time:"Yesterday",icon:q.BookOpen},{type:"event",message:"Church picnic scheduled",time:"2 days ago",icon:m.Calendar}];function u(){let{user:a}=(0,i.useUser)(),[l,m]=(0,c.useState)(!0),[q,u]=(0,c.useState)(0),[v,w]=(0,c.useState)(null),x="inboxLastSeenAt";async function y(){try{let b=a?.email;if(!b)return;let c=await fetch("/api/user/inbox",{credentials:"include"}),d=await c.json().catch(()=>({})),e=d?.lastSeen||null,f=d?.unreadCount||0;u(f);let[g,h]=await Promise.all([fetch(`/api/suggestions?email=${encodeURIComponent(b)}`),fetch(`/api/volunteers?email=${encodeURIComponent(b)}`)]),[i,j]=await Promise.all([g.json().catch(()=>({})),h.json().catch(()=>({}))]),k=i?.suggestions||[],l=j?.applications||[],m=[...k.map(a=>({when:a.respondedAt||a.createdAt,text:a.adminResponse?`Response: ${a.adminResponse}`:a.message})),...l.map(a=>({when:a.respondedAt||a.createdAt,text:a.adminMessage||`Volunteer: ${a.status}`}))].filter(a=>a.when);if(m.length>0)if(e){let a=new Date(e),b=m.filter(b=>new Date(b.when)>a);b.length>0?w(b.sort((a,b)=>new Date(b.when).getTime()-new Date(a.when).getTime())[0].text):w(m.sort((a,b)=>new Date(b.when).getTime()-new Date(a.when).getTime())[0].text)}else w(m.sort((a,b)=>new Date(b.when).getTime()-new Date(a.when).getTime())[0].text)}catch(a){console.error("Failed to load inbox summary",a)}}return((0,c.useEffect)(()=>{if(!a)return;(async()=>{try{await fetch("/api/user/inbox",{method:"PATCH",credentials:"include"}),await y()}catch(a){console.error("Failed to mark inbox read on load",a)}})();let b=setInterval(y,1e4);return()=>clearInterval(b)},[a]),a)?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-950",children:[(0,b.jsx)(f.MainNav,{}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)(e.Sidebar,{}),(0,b.jsx)("main",{className:"flex-1 overflow-auto",children:(0,b.jsxs)("div",{className:"p-6 md:p-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-blue-900 dark:text-white mb-2",children:["Welcome back, ",a.name,"!"]}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Here's what's happening in your church community today"})]}),l&&(0,b.jsx)(g.Card,{className:"mb-6 p-4 border-l-4 border-orange-500 bg-orange-50 dark:bg-orange-900/20",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(p.Bell,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-orange-900 dark:text-orange-400",children:"Upcoming Program Reminder"}),(0,b.jsx)("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Midweek Service - Wednesday 7:00 PM | Youth Group - Thursday 6:00 PM | Sunday Service - 10:00 AM"})]})]}),(0,b.jsx)("button",{onClick:()=>m(!1),className:"text-orange-600 hover:text-orange-700 dark:text-orange-400",children:"×"})]})}),q>0&&(0,b.jsx)(g.Card,{className:"mb-6 p-4 border-l-4 border-blue-600 bg-blue-50 dark:bg-slate-800/20",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(p.Bell,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-semibold text-blue-900 dark:text-blue-300",children:["You have ",q," new message",q>1?"s":""]}),v&&(0,b.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:v})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>{try{localStorage.setItem(x,new Date().toISOString()),u(0)}catch(a){}},className:"text-blue-600 hover:text-blue-700 dark:text-blue-400",children:"Mark as read"}),(0,b.jsx)(d.default,{href:"#inbox",onClick:()=>{try{localStorage.setItem(x,new Date().toISOString()),u(0)}catch(a){}},className:"text-sm text-white bg-blue-600 px-3 py-1 rounded",children:"Open Inbox"})]})]})}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:s.map((a,c)=>{let d=a.icon;return(0,b.jsxs)(g.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("div",{className:`p-3 rounded-lg ${a.color} bg-opacity-10`,children:(0,b.jsx)(d,{className:`w-6 h-6 ${a.color}`})}),(0,b.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:[(0,b.jsx)(n.TrendingUp,{className:"w-4 h-4 inline mr-1"}),a.change]})]}),(0,b.jsx)("h3",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium mb-1",children:a.title}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:a.value})]},c)})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)(g.Card,{className:"lg:col-span-2 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-blue-900 dark:text-white mb-6",children:"Recent Activity"}),(0,b.jsx)("div",{className:"space-y-4",children:t.map((a,c)=>{let d=a.icon;return(0,b.jsxs)("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-200 dark:border-gray-700 last:border-0",children:[(0,b.jsx)("div",{className:"p-3 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:(0,b.jsx)(d,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:a.message}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.time})]})]},c)})})]}),(0,b.jsxs)(g.Card,{className:"p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-blue-900 dark:text-white mb-6",children:"Quick Actions"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(d.default,{href:"/donate",children:(0,b.jsxs)(h.Button,{className:"w-full bg-green-600 hover:bg-green-700 justify-start",children:[(0,b.jsx)(j.Heart,{className:"w-4 h-4 mr-2"}),"Make Donation"]})}),(0,b.jsx)(d.default,{href:"/volunteer",children:(0,b.jsxs)(h.Button,{className:"w-full bg-blue-600 hover:bg-blue-700 justify-start",children:[(0,b.jsx)(k.Users,{className:"w-4 h-4 mr-2"}),"Sign Up Volunteer"]})}),(0,b.jsx)(d.default,{href:"/profile",children:(0,b.jsxs)(h.Button,{variant:"outline",className:"w-full justify-start bg-transparent",children:[(0,b.jsx)(o.Settings,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})}),(0,b.jsx)(d.default,{href:"/settings",children:(0,b.jsxs)(h.Button,{variant:"outline",className:"w-full justify-start bg-transparent",children:[(0,b.jsx)(o.Settings,{className:"w-4 h-4 mr-2"}),"Customize Theme"]})})]})]}),(0,b.jsx)(g.Card,{className:"p-6 mt-6",id:"inbox",children:(0,b.jsx)(r,{email:a.email})})]}),(0,b.jsxs)(g.Card,{className:"mt-6 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-blue-900 dark:text-white mb-6",children:"Featured Content"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{title:"Faith & Trust",date:"Last Sunday",views:"1.2K"},{title:"Building Community",date:"2 weeks ago",views:"985"},{title:"Daily Blessings",date:"1 week ago",views:"742"}].map((a,c)=>(0,b.jsxs)("div",{className:"p-4 rounded-lg border border-blue-200 dark:border-blue-900 hover:shadow-lg transition",children:[(0,b.jsx)("div",{className:"h-32 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg mb-3"}),(0,b.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:a.title}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.date," • ",a.views," views"]})]},c))})]})]})})]})]}):(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Please log in to access dashboard"}),(0,b.jsx)(d.default,{href:"/login",children:(0,b.jsx)(h.Button,{children:"Go to Login"})})]})})}a.s(["default",()=>u],20731)}];

//# sourceMappingURL=_eda17cc6._.js.map