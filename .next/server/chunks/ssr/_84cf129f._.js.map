{"version":3,"sources":["turbopack:///[project]/components/suggestions-inbox.tsx","turbopack:///[project]/app/messages/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { Card } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\n\nexport default function SuggestionsInbox({ email }: { email: string }) {\n  const [items, setItems] = useState<any[] | null>(null)\n  const [loading, setLoading] = useState(false)\n\n  async function fetchItems() {\n    if (!email) return\n    setLoading(true)\n    try {\n      const res = await fetch(`/api/suggestions?email=${encodeURIComponent(email)}`)\n      const data = await res.json()\n      setItems(data?.suggestions || [])\n    } catch (e) {\n      console.error('Failed to load suggestions for inbox', e)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    let mounted = true\n    if (!email) return\n    fetchItems()\n    const iv = setInterval(() => { if (mounted) fetchItems() }, 10000)\n    return () => { mounted = false; clearInterval(iv) }\n  }, [email])\n\n  if (!email) return <div className=\"text-sm text-gray-500\">No email set</div>\n  if (loading) return <div className=\"text-sm text-gray-500\">Loading messages…</div>\n  if (!items || items.length === 0) return <div className=\"text-sm text-gray-500\">No messages yet.</div>\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"flex items-center justify-end mb-2\">\n        <Button size=\"sm\" onClick={() => fetchItems()}>Refresh</Button>\n      </div>\n      {items.map((s) => (\n        <Card key={s.id} className=\"p-3\">\n          <div className=\"flex items-start justify-between\">\n            <div>\n              <div className=\"text-sm text-gray-700\">{s.type} • {new Date(s.createdAt).toLocaleString()}</div>\n              <div className=\"mt-2 text-gray-900 dark:text-white\">{s.message}</div>\n              {s.adminResponse && (\n                <div className=\"mt-3 p-3 bg-blue-50 dark:bg-slate-800 border rounded\">\n                  <div className=\"text-sm text-gray-600 dark:text-gray-300 font-semibold\">Response</div>\n                  <div className=\"text-sm text-gray-800 dark:text-gray-200 mt-1\">{s.adminResponse}</div>\n                  <div className=\"text-xs text-gray-500 mt-1\">Responded: {s.respondedAt ? new Date(s.respondedAt).toLocaleString() : ''}</div>\n                </div>\n              )}\n            </div>\n            <div className=\"ml-4 flex flex-col items-end\">\n              <div className=\"text-xs text-gray-500\">From: {s.name || s.email}</div>\n              {!s.adminResponse && <div className=\"text-xs text-gray-400 mt-2\">No response yet</div>}\n            </div>\n          </div>\n        </Card>\n      ))}\n    </div>\n  )\n}\n","\"use client\"\n\nimport { MainNav } from \"@/components/navigation/main-nav\"\nimport { Sidebar } from \"@/components/navigation/sidebar\"\nimport SuggestionsInbox from \"@/components/suggestions-inbox\"\nimport { useUser } from \"@/contexts/user-context\"\n\nexport default function MessagesPage() {\n  const { user } = useUser()\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-slate-950\">\n        <MainNav />\n        <div className=\"flex\">\n          <Sidebar />\n          <main className=\"flex-1 p-8\">\n            <div className=\"max-w-2xl mx-auto text-center\">\n              <h2 className=\"text-xl font-semibold\">Please log in to view your messages.</h2>\n            </div>\n          </main>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-slate-950\">\n      <MainNav />\n      <div className=\"flex\">\n        <Sidebar />\n        <main className=\"flex-1 p-8\">\n          <div className=\"max-w-4xl mx-auto\">\n            <h1 className=\"text-2xl font-bold mb-4\">My Messages</h1>\n            <div className=\"bg-white dark:bg-slate-800 p-4 rounded border\">\n              {/* @ts-ignore client component */}\n              <SuggestionsInbox email={user.email} />\n            </div>\n          </div>\n        </main>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}