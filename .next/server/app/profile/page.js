(()=>{var e={};e.id=6636,e.ids=[6636],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},84660:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=r(22689),a=r(63654),l=r(37312),i=r.n(l),n=r(28839),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let d=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,59918)),"/home/lod/Downloads/jwrc/app/profile/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,35167)),"/home/lod/Downloads/jwrc/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,31788,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,49389,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,67818,23)),"next/dist/client/components/unauthorized-error"]}],c=["/home/lod/Downloads/jwrc/app/profile/page.tsx"],x={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},38831:(e,t,r)=>{Promise.resolve().then(r.bind(r,59918))},98663:(e,t,r)=>{Promise.resolve().then(r.bind(r,97364))},97364:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s=r(42871),a=r(19522),l=r(52190),i=r.n(l),n=r(74484),o=r(4170),d=r(24939),c=r(15117),x=r(37853),m=r(56428),u=r(65547),g=r(361),h=r(99692),p=r(73488);let b=(0,r(18041).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var f=r(38096);function j(){let{user:e,updateProfile:t,isLoading:r}=(0,x.J)(),[l,j]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!1),[N,w]=(0,a.useState)(""),[k,A]=(0,a.useState)(""),[P,M]=(0,a.useState)({name:e?.name||"",email:e?.email||"",phone:e?.phone||"",location:e?.location||"",bio:e?.bio||"",profileImage:e?.profileImage||""}),[S,C]=(0,a.useState)(""),[D,R]=(0,a.useState)([]),[_,I]=(0,a.useState)(!1),[L,T]=(0,a.useState)({rotateX:0,rotateY:0}),[q,B]=(0,a.useState)(!1),G=async()=>{y(!0),w(""),A("");try{await t({name:P.name,email:P.email,phone:P.phone,location:P.location,bio:P.bio,profileImage:P.profileImage}),A("Profile updated"),j(!1)}catch(e){w(e?.message||"Failed to save changes")}finally{y(!1)}},z=e?.joinDate?new Date(e.joinDate).getFullYear():"",E=D[0],Y=e?.isVolunteer?"approved":E?.status||"none",$="approved"===Y?"Thank you for serving our community!":"pending"===Y?"Your application is under review. We will notify you soon.":"rejected"===Y?E?.adminMessage||"We could not approve this application.":"Interested in volunteering? Sign up today!";return r&&!e?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-center text-gray-500",children:"Loading your profile..."})}):e?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-950",children:[(0,s.jsx)(o.MainNav,{}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(n.B,{}),(0,s.jsx)("main",{className:"flex-1 overflow-auto",children:(0,s.jsxs)("div",{className:"p-6 md:p-8 max-w-4xl",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("h1",{className:"text-3xl font-bold text-blue-900 dark:text-white",children:"My Profile"})}),(0,s.jsxs)(d.Zp,{className:"overflow-hidden mb-8",children:[(0,s.jsx)("div",{style:{perspective:"1000px"},children:(0,s.jsxs)("div",{onMouseMove:e=>{if(!q)return;let t=e.currentTarget.getBoundingClientRect(),r=t.width/2,s=t.height/2,a=e.clientX-t.left;T({rotateX:(s-(e.clientY-t.top))/s*8,rotateY:(a-r)/r*8})},onMouseEnter:()=>{B(!0)},onMouseLeave:()=>{B(!1),T({rotateX:0,rotateY:0})},className:"h-40 relative overflow-hidden bg-gradient-to-b from-slate-900 to-slate-800 dark:from-slate-950 dark:to-slate-900 transition-transform duration-200",style:{transform:`perspective(1000px) rotateX(${L.rotateX}deg) rotateY(${L.rotateY}deg) translateZ(20px)`,transformStyle:"preserve-3d"},children:[(0,s.jsxs)("svg",{className:"absolute inset-0 w-full h-full",preserveAspectRatio:"none",viewBox:"0 0 1200 160",children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("filter",{id:"glow",children:[(0,s.jsx)("feGaussianBlur",{stdDeviation:"1.5",result:"coloredBlur"}),(0,s.jsxs)("feMerge",{children:[(0,s.jsx)("feMergeNode",{in:"coloredBlur"}),(0,s.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})}),(0,s.jsx)("path",{d:"M0,60 Q150,20 300,60 T600,60 T900,60 T1200,60",stroke:"rgba(34, 211, 238, 0.4)",strokeWidth:"2",fill:"none",filter:"url(#glow)"}),(0,s.jsx)("path",{d:"M0,80 Q150,40 300,80 T600,80 T900,80 T1200,80",stroke:"rgba(34, 211, 238, 0.3)",strokeWidth:"2",fill:"none",filter:"url(#glow)"}),(0,s.jsx)("path",{d:"M0,100 Q150,60 300,100 T600,100 T900,100 T1200,100",stroke:"rgba(6, 182, 212, 0.25)",strokeWidth:"2",fill:"none",filter:"url(#glow)"}),(0,s.jsx)("circle",{cx:"50",cy:"55",r:"2",fill:"rgba(34, 211, 238, 0.6)",filter:"url(#glow)"}),(0,s.jsx)("circle",{cx:"120",cy:"40",r:"1.5",fill:"rgba(34, 211, 238, 0.5)"}),(0,s.jsx)("circle",{cx:"200",cy:"50",r:"2",fill:"rgba(6, 182, 212, 0.6)",filter:"url(#glow)"}),(0,s.jsx)("circle",{cx:"280",cy:"65",r:"1.5",fill:"rgba(34, 211, 238, 0.5)"}),(0,s.jsx)("circle",{cx:"350",cy:"55",r:"2",fill:"rgba(34, 211, 238, 0.6)",filter:"url(#glow)"}),(0,s.jsx)("circle",{cx:"450",cy:"35",r:"1.5",fill:"rgba(6, 182, 212, 0.5)"}),(0,s.jsx)("circle",{cx:"550",cy:"60",r:"2",fill:"rgba(34, 211, 238, 0.6)",filter:"url(#glow)"}),(0,s.jsx)("circle",{cx:"650",cy:"50",r:"1.5",fill:"rgba(34, 211, 238, 0.5)"}),(0,s.jsx)("circle",{cx:"750",cy:"65",r:"2",fill:"rgba(6, 182, 212, 0.6)",filter:"url(#glow)"}),(0,s.jsx)("circle",{cx:"850",cy:"45",r:"1.5",fill:"rgba(34, 211, 238, 0.5)"}),(0,s.jsx)("circle",{cx:"950",cy:"58",r:"2",fill:"rgba(34, 211, 238, 0.6)",filter:"url(#glow)"}),(0,s.jsx)("circle",{cx:"1050",cy:"48",r:"1.5",fill:"rgba(6, 182, 212, 0.5)"}),(0,s.jsx)("circle",{cx:"1150",cy:"62",r:"2",fill:"rgba(34, 211, 238, 0.6)",filter:"url(#glow)"})]}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-slate-900/40 to-slate-900/80"})]})}),(0,s.jsxs)("div",{className:"px-6 pb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between -mt-16 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-end gap-4",children:[(0,s.jsx)("div",{className:"w-32 h-32 rounded-lg border-4 border-white dark:border-slate-900 bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center overflow-hidden relative",children:e.profileImage?(0,s.jsx)("img",{src:e.profileImage,alt:e.name,className:"w-full h-full object-cover"}):(0,s.jsx)("span",{className:"text-4xl font-bold text-white",children:e.name.charAt(0)})}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 capitalize",children:[e.role," • Joined ",z||"-"]})]})]}),(0,s.jsxs)("button",{onClick:()=>j(!l),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 hover:bg-blue-200 dark:hover:bg-blue-900/50 transition",children:[l?(0,s.jsx)(m.A,{className:"w-4 h-4"}):(0,s.jsx)(u.A,{className:"w-4 h-4"}),l?"Cancel":"Edit"]})]}),l?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Profile Picture"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center overflow-hidden",children:S?(0,s.jsx)("img",{src:S,alt:"Preview",className:"w-full h-full object-cover"}):(0,s.jsx)("span",{className:"text-2xl font-bold text-white",children:P.name.charAt(0)||"?"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>5242880){w("Image must be less than 5MB");return}let e=new FileReader;e.onloadend=()=>{let t=e.result;C(t),M({...P,profileImage:t})},e.readAsDataURL(t)}},className:"w-full text-sm text-gray-600 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/20 dark:file:text-blue-400"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"JPG, PNG or GIF (max 5MB)"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),(0,s.jsx)("input",{type:"text",value:P.name,onChange:e=>M({...P,name:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",value:P.email,onChange:e=>M({...P,email:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone"}),(0,s.jsx)("input",{type:"tel",value:P.phone,onChange:e=>M({...P,phone:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),(0,s.jsx)("input",{type:"text",value:P.location,onChange:e=>M({...P,location:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),(0,s.jsx)("textarea",{value:P.bio,onChange:e=>M({...P,bio:e.target.value}),rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),N&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:N}),k&&(0,s.jsx)("p",{className:"text-sm text-green-600",children:k}),(0,s.jsxs)(c.$,{onClick:G,disabled:v,className:"w-full bg-blue-600 hover:bg-blue-700",children:[(0,s.jsx)(b,{className:"w-4 h-4 mr-2"}),v?"Saving...":"Save Changes"]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Contact Information"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(g.A,{className:"w-5 h-5 text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.email})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(h.A,{className:"w-5 h-5 text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.phone||"Add your phone number"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(p.A,{className:"w-5 h-5 text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.location||"Add your city"})]})]})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-white dark:bg-slate-800 border",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Bio"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm whitespace-pre-line",children:e.bio||"Share a short introduction about yourself."})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-900",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-blue-900 dark:text-blue-400",children:"approved"===Y?"✓ Active Volunteer":"pending"===Y?"Application Pending":"rejected"===Y?"Application Not Approved":"Not a Volunteer"}),(0,s.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:$}),"approved"!==Y&&(0,s.jsx)("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-2",children:"pending"===Y&&E?.createdAt?`Submitted on ${new Date(E.createdAt).toLocaleDateString()}`:"rejected"===Y&&E?.respondedAt?`Reviewed on ${new Date(E.respondedAt).toLocaleDateString()}`:""})]}),(0,s.jsx)(i(),{href:"/volunteer",className:"px-3 py-2 text-sm font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"approved"===Y?"View roles":"Sign up"})]}),_&&(0,s.jsx)("p",{className:"text-xs text-blue-600 mt-2",children:"Checking your volunteer status..."})]}),(0,s.jsxs)("div",{className:"mt-6 p-4 rounded-lg bg-white dark:bg-slate-800 border",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Inbox & Messages"}),(0,s.jsx)("div",{children:(0,s.jsx)(f.A,{email:e.email})})]})]})]})]})]})})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Please log in to view profile"}),(0,s.jsx)(i(),{href:"/login",children:(0,s.jsx)(c.$,{children:"Go to Login"})})]})})}},38096:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(42871),a=r(19522),l=r(24939),i=r(15117);function n({email:e}){let[t,r]=(0,a.useState)(null),[n,o]=(0,a.useState)(!1);async function d(){if(e){o(!0);try{let t=await fetch(`/api/suggestions?email=${encodeURIComponent(e)}`),s=await t.json();r(s?.suggestions||[])}catch(e){console.error("Failed to load suggestions for inbox",e)}finally{o(!1)}}}return e?n?(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Loading messages…"}):t&&0!==t.length?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-end mb-2",children:(0,s.jsx)(i.$,{size:"sm",onClick:()=>d(),children:"Refresh"})}),t.map(e=>(0,s.jsx)(l.Zp,{className:"p-3",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:[e.type," • ",new Date(e.createdAt).toLocaleString()]}),(0,s.jsx)("div",{className:"mt-2 text-gray-900 dark:text-white",children:e.message}),e.adminResponse&&(0,s.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-slate-800 border rounded",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300 font-semibold",children:"Response"}),(0,s.jsx)("div",{className:"text-sm text-gray-800 dark:text-gray-200 mt-1",children:e.adminResponse}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Responded: ",e.respondedAt?new Date(e.respondedAt).toLocaleString():""]})]})]}),(0,s.jsxs)("div",{className:"ml-4 flex flex-col items-end",children:[(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["From: ",e.name||e.email]}),!e.adminResponse&&(0,s.jsx)("div",{className:"text-xs text-gray-400 mt-2",children:"No response yet"})]})]})},e.id))]}):(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"No messages yet."}):(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"No email set"})}},361:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(18041).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},73488:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(18041).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},65547:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(18041).A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},99692:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(18041).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},59918:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(57225).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/lod/Downloads/jwrc/app/profile/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/lod/Downloads/jwrc/app/profile/page.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[5089,5247,2190,6494,6795,4577],()=>r(84660));module.exports=s})();