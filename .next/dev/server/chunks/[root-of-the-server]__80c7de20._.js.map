{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/lod/Downloads/jwrc/app/api/mpesa/status/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { PrismaClient } from '@prisma/client'\n\nconst prisma = new PrismaClient()\n\nexport async function GET(req: Request) {\n  try {\n    const url = new URL(req.url)\n    const localIdRaw = url.searchParams.get('localId')\n    if (!localIdRaw) return NextResponse.json({ error: 'localId required' }, { status: 400 })\n    const localId = parseInt(localIdRaw, 10)\n    if (Number.isNaN(localId)) return NextResponse.json({ error: 'localId must be an integer' }, { status: 400 })\n\n    const rows: any = await prisma.$queryRawUnsafe(`SELECT id, amount, phone, account_reference, merchant_request_id, checkout_request_id, status, mpesa_transaction_id, provider_response FROM mpesa_donations WHERE id=$1::int LIMIT 1`, localId)\n    const rec = rows?.[0] || null\n    if (!rec) return NextResponse.json({ error: 'not found' }, { status: 404 })\n    return NextResponse.json({ donation: rec })\n  } catch (e: any) {\n    console.error('mpesa status error', e)\n    return NextResponse.json({ error: e?.message || 'server error' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,SAAS,IAAI,6IAAY;AAExB,eAAe,IAAI,GAAY;IACpC,IAAI;QACF,MAAM,MAAM,IAAI,IAAI,IAAI,GAAG;QAC3B,MAAM,aAAa,IAAI,YAAY,CAAC,GAAG,CAAC;QACxC,IAAI,CAAC,YAAY,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;QACvF,MAAM,UAAU,SAAS,YAAY;QACrC,IAAI,OAAO,KAAK,CAAC,UAAU,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA6B,GAAG;YAAE,QAAQ;QAAI;QAE3G,MAAM,OAAY,MAAM,OAAO,eAAe,CAAC,CAAC,oLAAoL,CAAC,EAAE;QACvO,MAAM,MAAM,MAAM,CAAC,EAAE,IAAI;QACzB,IAAI,CAAC,KAAK,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAY,GAAG;YAAE,QAAQ;QAAI;QACzE,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,UAAU;QAAI;IAC3C,EAAE,OAAO,GAAQ;QACf,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO,GAAG,WAAW;QAAe,GAAG;YAAE,QAAQ;QAAI;IAClF;AACF","debugId":null}}]
}