(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55404,e=>{"use strict";let t;var n,a,r,s,i,o,l,c=e.i(74524),d=e.i(30119),u=e.i(31193),m=e.i(78270);let p=(0,m.default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var f=e.i(67299),h=e.i(55020),g=e.i(15780);let x=(0,m.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var v=e.i(22478);let y=(0,m.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),b=(0,m.default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),j=(0,m.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var w=e.i(73951),N=e.i(67874),k=e.i(65797),S=e.i(10805),C=e.i(56400),E=e.i(14573),A=e.i(43923),R=e.i(8923),D=e.i(47102),T=e.i(89793),F=e.i(19583),M=d["useId".toString()]||(()=>void 0),O=0;function P(e){let[t,n]=d.useState(M());return(0,F.useLayoutEffect)(()=>{e||n(e=>e??String(O++))},[e]),e||(t?`radix-${t}`:"")}var L=e.i(52925),I=e.i(10359),B=e.i(15041),_=e.i(1971),$="focusScope.autoFocusOnMount",z="focusScope.autoFocusOnUnmount",W={bubbles:!1,cancelable:!0},H=d.forwardRef((e,t)=>{let{loop:n=!1,trapped:a=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...i}=e,[o,l]=d.useState(null),u=(0,_.useCallbackRef)(r),m=(0,_.useCallbackRef)(s),p=d.useRef(null),f=(0,D.useComposedRefs)(t,e=>l(e)),h=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(a){let e=function(e){if(h.paused||!o)return;let t=e.target;o.contains(t)?p.current=t:Y(p.current,{select:!0})},t=function(e){if(h.paused||!o)return;let t=e.relatedTarget;null!==t&&(o.contains(t)||Y(p.current,{select:!0}))};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let n=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&Y(o)});return o&&n.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[a,o,h.paused]),d.useEffect(()=>{if(o){J.add(h);let e=document.activeElement;if(!o.contains(e)){let t=new CustomEvent($,W);o.addEventListener($,u),o.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let n=document.activeElement;for(let a of e)if(Y(a,{select:t}),document.activeElement!==n)return}(U(o).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&Y(o))}return()=>{o.removeEventListener($,u),setTimeout(()=>{let t=new CustomEvent(z,W);o.addEventListener(z,m),o.dispatchEvent(t),t.defaultPrevented||Y(e??document.body,{select:!0}),o.removeEventListener(z,m),J.remove(h)},0)}}},[o,u,m,h]);let g=d.useCallback(e=>{if(!n&&!a||h.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){var s;let t,a=e.currentTarget,[i,o]=[K(t=U(s=a),s),K(t.reverse(),s)];i&&o?e.shiftKey||r!==o?e.shiftKey&&r===i&&(e.preventDefault(),n&&Y(o,{select:!0})):(e.preventDefault(),n&&Y(i,{select:!0})):r===a&&e.preventDefault()}},[n,a,h.paused]);return(0,c.jsx)(B.Primitive.div,{tabIndex:-1,...i,ref:f,onKeyDown:g})});function U(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function K(e,t){for(let n of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(n,{upTo:t}))return n}function Y(e,{select:t=!1}={}){if(e&&e.focus){var n;let a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&(n=e)instanceof HTMLInputElement&&"select"in n&&t&&e.select()}}H.displayName="FocusScope";var J=(t=[],{add(e){let n=t[0];e!==n&&n?.pause(),(t=V(t,e)).unshift(e)},remove(e){t=V(t,e),t[0]?.resume()}});function V(e,t){let n=[...e],a=n.indexOf(t);return -1!==a&&n.splice(a,1),n}var q=e.i(9760),X=e.i(5620),Z=0;function G(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Q=function(){return(Q=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function ee(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n}var et=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),en="width-before-scroll-bar";function ea(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var er="undefined"!=typeof window?d.useLayoutEffect:d.useEffect,es=new WeakMap,ei=(void 0===n&&(n={}),(void 0===a&&(a=function(e){return e}),r=[],s=!1,i={read:function(){if(s)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:null},useMedium:function(e){var t=a(e,s);return r.push(t),function(){r=r.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(s=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){s=!0;var t=[];if(r.length){var n=r;r=[],n.forEach(e),t=r}var a=function(){var n=t;t=[],n.forEach(e)},i=function(){return Promise.resolve().then(a)};i(),r={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),r}}}}).options=Q({async:!0,ssr:!1},n),i),eo=function(){},el=d.forwardRef(function(e,t){var n,a,r,s,i=d.useRef(null),o=d.useState({onScrollCapture:eo,onWheelCapture:eo,onTouchMoveCapture:eo}),l=o[0],c=o[1],u=e.forwardProps,m=e.children,p=e.className,f=e.removeScrollBar,h=e.enabled,g=e.shards,x=e.sideCar,v=e.noRelative,y=e.noIsolation,b=e.inert,j=e.allowPinchZoom,w=e.as,N=e.gapMode,k=ee(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=(n=[i,t],a=function(e){return n.forEach(function(t){return ea(t,e)})},(r=(0,d.useState)(function(){return{value:null,callback:a,facade:{get current(){return r.value},set current(value){var e=r.value;e!==value&&(r.value=value,r.callback(value,e))}}}})[0]).callback=a,s=r.facade,er(function(){var e=es.get(s);if(e){var t=new Set(e),a=new Set(n),r=s.current;t.forEach(function(e){a.has(e)||ea(e,null)}),a.forEach(function(e){t.has(e)||ea(e,r)})}es.set(s,n)},[n]),s),C=Q(Q({},k),l);return d.createElement(d.Fragment,null,h&&d.createElement(x,{sideCar:ei,removeScrollBar:f,shards:g,noRelative:v,noIsolation:y,inert:b,setCallbacks:c,allowPinchZoom:!!j,lockRef:i,gapMode:N}),u?d.cloneElement(d.Children.only(m),Q(Q({},C),{ref:S})):d.createElement(void 0===w?"div":w,Q({},C,{className:p,ref:S}),m))});el.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},el.classNames={fullWidth:en,zeroRight:et};var ec=function(e){var t=e.sideCar,n=ee(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw Error("Sidecar medium not found");return d.createElement(a,Q({},n))};ec.isSideCarExport=!0;var ed=function(){var e=0,t=null;return{add:function(n){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=l||("undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0);return t&&e.setAttribute("nonce",t),e}())){var a,r;(a=t).styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n)),r=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(r)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},eu=function(){var e=ed();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},em=function(){var e=eu();return function(t){return e(t.styles,t.dynamic),null}},ep={left:0,top:0,right:0,gap:0},ef=function(e){return parseInt(e||"",10)||0},eh=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],a=t["padding"===e?"paddingTop":"marginTop"],r=t["padding"===e?"paddingRight":"marginRight"];return[ef(n),ef(a),ef(r)]},eg=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return ep;var t=eh(e),n=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-n+t[2]-t[0])}},ex=em(),ev="data-scroll-locked",ey=function(e,t,n,a){var r=e.left,s=e.top,i=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(a,";\n   padding-right: ").concat(o,"px ").concat(a,";\n  }\n  body[").concat(ev,"] {\n    overflow: hidden ").concat(a,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(a,";"),"margin"===n&&"\n    padding-left: ".concat(r,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(a,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(a,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(et," {\n    right: ").concat(o,"px ").concat(a,";\n  }\n  \n  .").concat(en," {\n    margin-right: ").concat(o,"px ").concat(a,";\n  }\n  \n  .").concat(et," .").concat(et," {\n    right: 0 ").concat(a,";\n  }\n  \n  .").concat(en," .").concat(en," {\n    margin-right: 0 ").concat(a,";\n  }\n  \n  body[").concat(ev,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},eb=function(){var e=parseInt(document.body.getAttribute(ev)||"0",10);return isFinite(e)?e:0},ej=function(){d.useEffect(function(){return document.body.setAttribute(ev,(eb()+1).toString()),function(){var e=eb()-1;e<=0?document.body.removeAttribute(ev):document.body.setAttribute(ev,e.toString())}},[])},ew=function(e){var t=e.noRelative,n=e.noImportant,a=e.gapMode,r=void 0===a?"margin":a;ej();var s=d.useMemo(function(){return eg(r)},[r]);return d.createElement(ex,{styles:ey(s,!t,r,n?"":"!important")})},eN=!1;if("undefined"!=typeof window)try{var ek=Object.defineProperty({},"passive",{get:function(){return eN=!0,!0}});window.addEventListener("test",ek,ek),window.removeEventListener("test",ek,ek)}catch(e){eN=!1}var eS=!!eN&&{passive:!1},eC=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&(n.overflowY!==n.overflowX||"TEXTAREA"===e.tagName||"visible"!==n[t])},eE=function(e,t){var n=t.ownerDocument,a=t;do{if("undefined"!=typeof ShadowRoot&&a instanceof ShadowRoot&&(a=a.host),eA(e,a)){var r=eR(e,a);if(r[1]>r[2])return!0}a=a.parentNode}while(a&&a!==n.body)return!1},eA=function(e,t){return"v"===e?eC(t,"overflowY"):eC(t,"overflowX")},eR=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},eD=function(e,t,n,a,r){var s,i=(s=window.getComputedStyle(t).direction,"h"===e&&"rtl"===s?-1:1),o=i*a,l=n.target,c=t.contains(l),d=!1,u=o>0,m=0,p=0;do{if(!l)break;var f=eR(e,l),h=f[0],g=f[1]-f[2]-i*h;(h||g)&&eA(e,l)&&(m+=g,p+=h);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l))return u&&(r&&1>Math.abs(m)||!r&&o>m)?d=!0:!u&&(r&&1>Math.abs(p)||!r&&-o>p)&&(d=!0),d},eT=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},eF=function(e){return[e.deltaX,e.deltaY]},eM=function(e){return e&&"current"in e?e.current:e},eO=0,eP=[];let eL=(o=function(e){var t=d.useRef([]),n=d.useRef([0,0]),a=d.useRef(),r=d.useState(eO++)[0],s=d.useState(em)[0],i=d.useRef(e);d.useEffect(function(){i.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var t=(function(e,t,n){if(n||2==arguments.length)for(var a,r=0,s=t.length;r<s;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(eM),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var o=d.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var r,s=eT(e),o=n.current,l="deltaX"in e?e.deltaX:o[0]-s[0],c="deltaY"in e?e.deltaY:o[1]-s[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var m=window.getSelection(),p=m&&m.anchorNode;if(p&&(p===d||p.contains(d)))return!1;var f=eE(u,d);if(!f)return!0;if(f?r=u:(r="v"===u?"h":"v",f=eE(u,d)),!f)return!1;if(!a.current&&"changedTouches"in e&&(l||c)&&(a.current=r),!r)return!0;var h=a.current||r;return eD(h,t,e,"h"===h?l:c,!0)},[]),l=d.useCallback(function(e){if(eP.length&&eP[eP.length-1]===s){var n="deltaY"in e?eF(e):eT(e),a=t.current.filter(function(t){var a;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(a=t.delta,a[0]===n[0]&&a[1]===n[1])})[0];if(a&&a.should){e.cancelable&&e.preventDefault();return}if(!a){var r=(i.current.shards||[]).map(eM).filter(Boolean).filter(function(t){return t.contains(e.target)});(r.length>0?o(e,r[0]):!i.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),c=d.useCallback(function(e,n,a,r){var s={name:e,delta:n,target:a,should:r,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(a)};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),u=d.useCallback(function(e){n.current=eT(e),a.current=void 0},[]),m=d.useCallback(function(t){c(t.type,eF(t),t.target,o(t,e.lockRef.current))},[]),p=d.useCallback(function(t){c(t.type,eT(t),t.target,o(t,e.lockRef.current))},[]);d.useEffect(function(){return eP.push(s),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",l,eS),document.addEventListener("touchmove",l,eS),document.addEventListener("touchstart",u,eS),function(){eP=eP.filter(function(e){return e!==s}),document.removeEventListener("wheel",l,eS),document.removeEventListener("touchmove",l,eS),document.removeEventListener("touchstart",u,eS)}},[]);var f=e.removeScrollBar,h=e.inert;return d.createElement(d.Fragment,null,h?d.createElement(s,{styles:"\n  .block-interactivity-".concat(r," {pointer-events: none;}\n  .allow-interactivity-").concat(r," {pointer-events: all;}\n")}):null,f?d.createElement(ew,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},ei.useMedium(o),ec);var eI=d.forwardRef(function(e,t){return d.createElement(el,Q({},e,{ref:t,sideCar:eL}))});eI.classNames=el.classNames;var eB=new WeakMap,e_=new WeakMap,e$={},ez=0,eW=function(e){return e&&(e.host||eW(e.parentNode))},eH=function(e,t,n,a){var r=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var n=eW(e);return n&&t.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});e$[n]||(e$[n]=new WeakMap);var s=e$[n],i=[],o=new Set,l=new Set(r),c=function(e){!e||o.has(e)||(o.add(e),c(e.parentNode))};r.forEach(c);var d=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(a),r=null!==t&&"false"!==t,l=(eB.get(e)||0)+1,c=(s.get(e)||0)+1;eB.set(e,l),s.set(e,c),i.push(e),1===l&&r&&e_.set(e,!0),1===c&&e.setAttribute(n,"true"),r||e.setAttribute(a,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return d(t),o.clear(),ez++,function(){i.forEach(function(e){var t=eB.get(e)-1,r=s.get(e)-1;eB.set(e,t),s.set(e,r),t||(e_.has(e)||e.removeAttribute(a),e_.delete(e)),r||e.removeAttribute(n)}),--ez||(eB=new WeakMap,eB=new WeakMap,e_=new WeakMap,e$={})}},eU=function(e,t,n){void 0===n&&(n="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),r=t||("undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body);return r?(a.push.apply(a,Array.from(r.querySelectorAll("[aria-live], script"))),eH(a,r,n,"aria-hidden")):function(){return null}},eK=e.i(93948),eY="Dialog",[eJ,eV]=(0,T.createContextScope)(eY),[eq,eX]=eJ(eY),eZ=e=>{let{__scopeDialog:t,children:n,open:a,defaultOpen:r,onOpenChange:s,modal:i=!0}=e,o=d.useRef(null),l=d.useRef(null),[u=!1,m]=(0,L.useControllableState)({prop:a,defaultProp:r,onChange:s});return(0,c.jsx)(eq,{scope:t,triggerRef:o,contentRef:l,contentId:P(),titleId:P(),descriptionId:P(),open:u,onOpenChange:m,onOpenToggle:d.useCallback(()=>m(e=>!e),[m]),modal:i,children:n})};eZ.displayName=eY;var eG="DialogTrigger";d.forwardRef((e,t)=>{let{__scopeDialog:n,...a}=e,r=eX(eG,n),s=(0,D.useComposedRefs)(t,r.triggerRef);return(0,c.jsx)(B.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":ti(r.open),...a,ref:s,onClick:(0,R.composeEventHandlers)(e.onClick,r.onOpenToggle)})}).displayName=eG;var eQ="DialogPortal",[e0,e1]=eJ(eQ,{forceMount:void 0}),e2=e=>{let{__scopeDialog:t,forceMount:n,children:a,container:r}=e,s=eX(eQ,t);return(0,c.jsx)(e0,{scope:t,forceMount:n,children:d.Children.map(a,e=>(0,c.jsx)(X.Presence,{present:n||s.open,children:(0,c.jsx)(q.Portal,{asChild:!0,container:r,children:e})}))})};e2.displayName=eQ;var e4="DialogOverlay",e6=d.forwardRef((e,t)=>{let n=e1(e4,e.__scopeDialog),{forceMount:a=n.forceMount,...r}=e,s=eX(e4,e.__scopeDialog);return s.modal?(0,c.jsx)(X.Presence,{present:a||s.open,children:(0,c.jsx)(e5,{...r,ref:t})}):null});e6.displayName=e4;var e5=d.forwardRef((e,t)=>{let{__scopeDialog:n,...a}=e,r=eX(e4,n);return(0,c.jsx)(eI,{as:eK.Slot,allowPinchZoom:!0,shards:[r.contentRef],children:(0,c.jsx)(B.Primitive.div,{"data-state":ti(r.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),e3="DialogContent",e9=d.forwardRef((e,t)=>{let n=e1(e3,e.__scopeDialog),{forceMount:a=n.forceMount,...r}=e,s=eX(e3,e.__scopeDialog);return(0,c.jsx)(X.Presence,{present:a||s.open,children:s.modal?(0,c.jsx)(e7,{...r,ref:t}):(0,c.jsx)(e8,{...r,ref:t})})});e9.displayName=e3;var e7=d.forwardRef((e,t)=>{let n=eX(e3,e.__scopeDialog),a=d.useRef(null),r=(0,D.useComposedRefs)(t,n.contentRef,a);return d.useEffect(()=>{let e=a.current;if(e)return eU(e)},[]),(0,c.jsx)(te,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,R.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:(0,R.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:(0,R.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),e8=d.forwardRef((e,t)=>{let n=eX(e3,e.__scopeDialog),a=d.useRef(!1),r=d.useRef(!1);return(0,c.jsx)(te,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||n.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,r.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));let s=t.target;n.triggerRef.current?.contains(s)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}})}),te=d.forwardRef((e,t)=>{let{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:r,onCloseAutoFocus:s,...i}=e,o=eX(e3,n),l=d.useRef(null),u=(0,D.useComposedRefs)(t,l);return d.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??G()),document.body.insertAdjacentElement("beforeend",e[1]??G()),Z++,()=>{1===Z&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Z--}},[]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(H,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:r,onUnmountAutoFocus:s,children:(0,c.jsx)(I.DismissableLayer,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":ti(o.open),...i,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(td,{titleId:o.titleId}),(0,c.jsx)(tu,{contentRef:l,descriptionId:o.descriptionId})]})]})}),tt="DialogTitle",tn=d.forwardRef((e,t)=>{let{__scopeDialog:n,...a}=e,r=eX(tt,n);return(0,c.jsx)(B.Primitive.h2,{id:r.titleId,...a,ref:t})});tn.displayName=tt;var ta="DialogDescription";d.forwardRef((e,t)=>{let{__scopeDialog:n,...a}=e,r=eX(ta,n);return(0,c.jsx)(B.Primitive.p,{id:r.descriptionId,...a,ref:t})}).displayName=ta;var tr="DialogClose",ts=d.forwardRef((e,t)=>{let{__scopeDialog:n,...a}=e,r=eX(tr,n);return(0,c.jsx)(B.Primitive.button,{type:"button",...a,ref:t,onClick:(0,R.composeEventHandlers)(e.onClick,()=>r.onOpenChange(!1))})});function ti(e){return e?"open":"closed"}ts.displayName=tr;var to="DialogTitleWarning",[tl,tc]=(0,T.createContext)(to,{contentName:e3,titleName:tt,docsSlug:"dialog"}),td=({titleId:e})=>{let t=tc(to),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},tu=({contentRef:e,descriptionId:t})=>{let n=tc("DialogDescriptionWarning"),a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${n.contentName}}.`;return d.useEffect(()=>{let n=e.current?.getAttribute("aria-describedby");t&&n&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},tm=e.i(26350),tm=tm,tp=e.i(32743);function tf({...e}){return(0,c.jsx)(eZ,{"data-slot":"dialog",...e})}function th({...e}){return(0,c.jsx)(e2,{"data-slot":"dialog-portal",...e})}function tg({className:e,...t}){return(0,c.jsx)(e6,{"data-slot":"dialog-overlay",className:(0,tp.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function tx({className:e,children:t,showCloseButton:n=!0,...a}){return(0,c.jsxs)(th,{"data-slot":"dialog-portal",children:[(0,c.jsx)(tg,{}),(0,c.jsxs)(e9,{"data-slot":"dialog-content",className:(0,tp.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...a,children:[t,n&&(0,c.jsxs)(ts,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,c.jsx)(tm.default,{}),(0,c.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function tv({className:e,...t}){return(0,c.jsx)("div",{"data-slot":"dialog-header",className:(0,tp.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function ty({className:e,...t}){return(0,c.jsx)("div",{"data-slot":"dialog-footer",className:(0,tp.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function tb({className:e,...t}){return(0,c.jsx)(tn,{"data-slot":"dialog-title",className:(0,tp.cn)("text-lg leading-none font-semibold",e),...t})}function tj({className:e,style:t,...n}){let a={writingMode:"horizontal-tb",transform:"none",...t||{}};return(0,c.jsx)("textarea",{"data-slot":"textarea",className:(0,tp.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm resize-y",e),style:a,...n})}var tw=e.i(27960),tN=e.i(83380);function tk(){let[e,t]=(0,d.useState)(""),[n,a]=(0,d.useState)(""),[r,s]=(0,d.useState)(!0),[i,o]=(0,d.useState)("overview"),[l,m]=(0,d.useState)(!1),R=(0,u.useRouter)(),[D,T]=(0,d.useState)([]),[F,M]=(0,d.useState)(""),[O,P]=(0,d.useState)(""),[L,I]=(0,d.useState)([]),[B,_]=(0,d.useState)({}),[$,z]=(0,d.useState)(null),[W,H]=(0,d.useState)(!1),[U,K]=(0,d.useState)(!1),[Y,J]=(0,d.useState)(""),[V,q]=(0,d.useState)(""),[X,Z]=(0,d.useState)(""),[G,Q]=(0,d.useState)(""),[ee,et]=(0,d.useState)(""),[en,ea]=(0,d.useState)({}),[er,es]=(0,d.useState)(!1);(0,d.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me",{credentials:"include"}),n=await e.json();if(!n?.user||"admin"!==n.user.role)return void R.push("/admin/login");t(n.user.email),a(n.user.name||"")}catch(e){R.push("/admin/login")}})()},[R]),(0,d.useEffect)(()=>{if("announcements"!==i)return;let e=!0;return(async()=>{try{let t=await fetch("/api/announcements",{credentials:"include"}),n=await t.json();if(!e)return;T(n?.announcements||[])}catch(e){console.error("Failed to load announcements",e)}})(),()=>{e=!1}},[i]),(0,d.useEffect)(()=>{if("events"!==i)return;let e=!0;return(async()=>{try{let t=await fetch("/api/events",{credentials:"include"}),n=await t.json();if(!e)return;I(n?.events||[])}catch(e){console.error("Failed to load events",e)}})(),()=>{e=!1}},[i]);let[ei,eo]=(0,d.useState)([]);(0,d.useEffect)(()=>{if("volunteers"!==i)return;let e=!0;return(async()=>{try{let t=await fetch("/api/volunteers",{credentials:"include"}),n=await t.json();if(!e)return;eo(n?.applications||[])}catch(e){console.error("Failed to load volunteer applications",e)}})(),()=>{e=!1}},[i]);let[el,ec]=(0,d.useState)([]),[ed,eu]=(0,d.useState)(null),[em,ep]=(0,d.useState)(0),[ef,eh]=(0,d.useState)(!1),[eg,ex]=(0,d.useState)(null),[ev,ey]=(0,d.useState)(null),[eb,ej]=(0,d.useState)(null),[ew,eN]=(0,d.useState)(""),[ek,eS]=(0,d.useState)(!1),[eC,eE]=(0,d.useState)(null),{toast:eA}=(0,A.useToast)();async function eR(e){if(confirm("Delete this announcement?"))try{let t=await fetch("/api/announcements",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(t.ok)await t.json(),T(t=>t.filter(t=>t.id!==e));else{let e=await t.json();console.error("Failed to delete announcement",e),alert("Failed to delete announcement: "+(e?.error||t.status))}}catch(e){console.error(e),alert("Failed to delete announcement")}}async function eD(e){if(confirm("Delete this event?"))try{let t=await fetch("/api/events",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(t.ok)I(t=>t.filter(t=>t.id!==e)),eO();else{let e=await t.json();console.error("Failed to delete event",e),alert("Failed to delete event: "+(e?.error||t.status))}}catch(e){console.error(e),alert("Failed to delete event")}}(0,d.useEffect)(()=>{if("suggestions"!==i)return;let e=!0;async function t(){try{let t=await fetch("/api/suggestions",{credentials:"include"}),n=await t.json();if(!e)return;ec(n?.suggestions||[])}catch(e){console.error("Failed to load suggestions",e)}}t();let n=setInterval(()=>{e&&t()},8e3);return()=>{e=!1,clearInterval(n)}},[i]),(0,d.useEffect)(()=>{let e=!0;try{let e=localStorage.getItem("adminSuggestionsLastSeen");e&&eu(e)}catch(e){}async function t(){try{let t=await fetch("/api/suggestions",{credentials:"include"});if(!t.ok)return;let n=await t.json();if(!e)return;let a=n?.suggestions||[];if(a.length>0){let e=ed?new Date(ed):null,t=e?a.filter(t=>new Date(t.createdAt)>e).length:a.length;ep(t)}else ep(0)}catch(e){}}t();let n=setInterval(t,1e4);return()=>{e=!1,clearInterval(n)}},[ed]),(0,d.useEffect)(()=>{if("suggestions"===i){let e=new Date().toISOString();try{localStorage.setItem("adminSuggestionsLastSeen",e)}catch(e){}eu(e),ep(0)}},[i]);let eT=async()=>{try{let e=await fetch("/api/auth/refresh",{method:"POST",credentials:"include"}),t=await e.json();e.ok?(alert("Session refreshed successfully! Your admin permissions are now active."),window.location.reload()):alert("Failed to refresh session: "+(t?.error||"Unknown error"))}catch(e){console.error(e),alert("Failed to refresh session")}},[eF,eM]=(0,d.useState)({volunteerCount:0,eventCount:0}),eO=async()=>{try{let[e,t]=await Promise.all([fetch("/api/volunteers",{credentials:"include"}),fetch("/api/events",{credentials:"include"})]),[n,a]=await Promise.all([e.json().catch(()=>({})),t.json().catch(()=>({}))]),r=(n?.applications||[]).filter(e=>"approved"===e.status).length,s=new Date;s.setHours(0,0,0,0);let i=(a?.events||[]).filter(e=>new Date(e.startsAt)>=s).length;eM({volunteerCount:r||0,eventCount:i||0})}catch(e){console.error("Failed to load stats",e)}};(0,d.useEffect)(()=>{eO()},[]);let eP=[{label:"Active Volunteers",value:eF.volunteerCount.toString(),change:"Approved",icon:f.Users,color:"blue"},{label:"Upcoming Events",value:eF.eventCount.toString(),change:"This month",icon:h.Calendar,color:"orange"}],[eL,eI]=(0,d.useState)([]);return(0,d.useEffect)(()=>{!async function(){try{let[e,t,n,a]=await Promise.all([fetch("/api/announcements",{credentials:"include"}),fetch("/api/volunteers",{credentials:"include"}),fetch("/api/suggestions",{credentials:"include"}),fetch("/api/events",{credentials:"include"})]),[r,s,i,o]=await Promise.all([e.json().catch(()=>({})),t.json().catch(()=>({})),n.json().catch(()=>({})),a.json().catch(()=>({}))]),l=[...(r?.announcements||[]).slice(0,2).map(e=>({id:e.id,type:"announcement",user:e.author||"Admin",text:e.title,time:e.postedAt?new Date(e.postedAt).toLocaleDateString():"Recent",status:"posted"})),...(s?.applications||[]).slice(0,2).map(e=>({id:e.id,type:"volunteer",user:e.name||"Volunteer",role:e.roleTitle||e.status,time:e.createdAt?new Date(e.createdAt).toLocaleDateString():"Recent",status:e.status||"pending"})),...(i?.suggestions||[]).slice(0,2).map(e=>({id:e.id,type:"suggestion",user:e.name||"User",text:e.message,time:e.createdAt?new Date(e.createdAt).toLocaleDateString():"Recent",status:e.status||"new"})),...(o?.events||[]).slice(0,2).map(e=>({id:e.id,type:"event",title:e.title,participants:"TBD",time:e.startsAt?new Date(e.startsAt).toLocaleDateString():"Recent",status:"upcoming"}))].sort(()=>Math.random()-.5).slice(0,4);eI(l)}catch(e){console.error("Failed to load activities",e)}}()},[]),(0,c.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-slate-900",children:[(0,c.jsx)("header",{className:"bg-white dark:bg-slate-800 shadow sticky top-0 z-40",children:(0,c.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)("button",{onClick:()=>s(!r),className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700",children:r?(0,c.jsx)(S.X,{className:"w-6 h-6"}):(0,c.jsx)(k.Menu,{className:"w-6 h-6"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Dashboard"}),(0,c.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsxs)(E.Button,{onClick:eT,variant:"outline",className:"border-blue-200 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 bg-transparent",children:[(0,c.jsx)(j,{className:"w-4 h-4 mr-2"}),"Refresh Session"]}),(0,c.jsxs)(E.Button,{onClick:()=>{fetch("/api/auth/logout",{method:"POST"}).finally(()=>R.push("/admin/login"))},variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 bg-transparent",children:[(0,c.jsx)(g.LogOut,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}),(0,c.jsxs)("div",{className:"flex h-[calc(100vh-70px)]",children:[(0,c.jsx)("aside",{className:`${r?"w-64":"w-0"} bg-gray-900 text-white overflow-y-auto transition-all duration-300 hidden lg:block`,children:(0,c.jsx)("nav",{className:"p-6 space-y-2",children:[{label:"Overview",icon:p,id:"overview"},{label:"Announcements",icon:w.MessageSquare,id:"announcements"},{label:"Events",icon:h.Calendar,id:"events"},{label:"Volunteers",icon:f.Users,id:"volunteers"},{label:"Suggestions",icon:w.MessageSquare,id:"suggestions"},{label:"Settings",icon:N.Settings,id:"settings"}].map(e=>(0,c.jsxs)("button",{onClick:()=>o(e.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition ${i===e.id?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-800"}`,children:[(0,c.jsx)(e.icon,{className:"w-5 h-5"}),(0,c.jsxs)("span",{className:"flex items-center gap-2",children:[(0,c.jsx)("span",{children:e.label}),"suggestions"===e.id&&em>0&&(0,c.jsx)("span",{className:"text-xs bg-red-600 text-white rounded-full px-2 py-0.5",children:em})]})]},e.id))})}),(0,c.jsxs)("main",{className:"flex-1 overflow-y-auto p-6",children:["overview"===i&&(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:eP.map((e,t)=>(0,c.jsxs)(tw.Card,{className:"bg-white dark:bg-slate-800 p-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("div",{className:`w-12 h-12 bg-${e.color}-100 dark:bg-${e.color}-900/30 rounded-lg flex items-center justify-center`,children:(0,c.jsx)(e.icon,{className:`w-6 h-6 text-${e.color}-600`})}),(0,c.jsx)(b,{className:`w-5 h-5 text-${e.color}-600`})]}),(0,c.jsx)("h3",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.label}),(0,c.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:e.value}),(0,c.jsx)("p",{className:`text-xs text-${e.color}-600 mt-2`,children:e.change})]},t))}),(0,c.jsxs)(tw.Card,{className:"bg-white dark:bg-slate-800 p-6",children:[(0,c.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,c.jsx)(j,{className:"w-6 h-6"}),"Recent Activity"]}),(0,c.jsx)("div",{className:"space-y-3",children:eL.map(e=>(0,c.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-slate-700 rounded-lg",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:["volunteer"===e.type&&`${e.user} signed up for ${e.role}`,"suggestion"===e.type&&`${e.user}: "${e.text}"`,"event"===e.type&&`${e.title} coming up`,"announcement"===e.type&&`Announcement: ${e.text}`]}),(0,c.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.time})]}),(0,c.jsx)(tN.Badge,{className:`${"completed"===e.status||"posted"===e.status?"bg-green-600":"pending"===e.status?"bg-yellow-600":"upcoming"===e.status?"bg-blue-600":"bg-gray-600"}`,children:e.status})]},e.id))})]})]}),"announcements"===i&&(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Manage Announcements"}),(0,c.jsxs)(E.Button,{onClick:()=>m(!l),className:"bg-blue-600 hover:bg-blue-700",children:[(0,c.jsx)(x,{className:"w-4 h-4 mr-2"}),"Add Announcement"]})]}),l&&(0,c.jsxs)(tw.Card,{className:"bg-white dark:bg-slate-800 p-6",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Create New Announcement"}),(0,c.jsxs)("form",{className:"space-y-4",onSubmit:async e=>{e.preventDefault();try{let e=await fetch("/api/announcements",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:F,content:O})});if(e.ok){let e=await (await fetch("/api/announcements")).json();T(e?.announcements||[]),m(!1),M(""),P("")}else{let t=await e.json().catch(()=>({}));console.error("Failed to publish announcement",t),alert("Failed to publish announcement: "+(t?.error||e.status))}}catch(e){console.error(e),alert("Failed to publish announcement")}},children:[(0,c.jsx)("input",{type:"text",value:F,onChange:e=>M(e.target.value),placeholder:"Announcement Title",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-slate-700 dark:text-white"}),(0,c.jsx)("textarea",{placeholder:"Announcement Content",rows:4,value:O,onChange:e=>P(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-slate-700 dark:text-white"}),(0,c.jsxs)("div",{className:"flex gap-3",children:[(0,c.jsx)(E.Button,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"Publish"}),(0,c.jsx)(E.Button,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"})]})]})]}),(0,c.jsx)("div",{className:"space-y-3",children:D.map(e=>(0,c.jsxs)(tw.Card,{className:"bg-white dark:bg-slate-800 p-4 flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),(0,c.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.postedAt?new Date(e.postedAt).toLocaleDateString():""})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(tN.Badge,{className:"bg-green-600",children:"active"}),(0,c.jsx)(E.Button,{size:"sm",variant:"outline",children:(0,c.jsx)(v.Edit2,{className:"w-4 h-4"})}),(0,c.jsx)(E.Button,{size:"sm",variant:"outline",className:"text-red-600 border-red-200 bg-transparent",onClick:()=>eR(e.id),children:(0,c.jsx)(y,{className:"w-4 h-4"})})]})]},e.id))})]}),"events"===i&&(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Manage Events"}),(0,c.jsxs)(E.Button,{onClick:()=>K(!U),className:"bg-blue-600 hover:bg-blue-700",children:[(0,c.jsx)(x,{className:"w-4 h-4 mr-2"}),"Add Event"]})]}),U&&(0,c.jsxs)(tw.Card,{className:"bg-white dark:bg-slate-800 p-6",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Create New Event"}),(0,c.jsxs)("form",{className:"space-y-4",onSubmit:async e=>{e.preventDefault();let t={};if(Y&&0!==Y.trim().length||(t.title="Title is required"),G?isNaN(Date.parse(G))&&(t.startsAt="Start date/time is invalid"):t.startsAt="Start date/time is required",ee&&isNaN(Date.parse(ee))&&(t.endsAt="End date/time is invalid"),G&&ee&&!t.startsAt&&!t.endsAt){let e=Date.parse(G),n=Date.parse(ee);isNaN(e)||isNaN(n)||!(n<e)||(t.endsAt="End must be after start")}if(Object.keys(t).length>0)return void ea(t);es(!0),ea({});try{let e=await fetch("/api/events",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:Y,description:V,location:X,startsAt:G,endsAt:ee})});if(e.ok){let e=await (await fetch("/api/events")).json();I(e?.events||[]),eO(),K(!1),J(""),q(""),Z(""),Q(""),et("")}else{let t=await e.json().catch(()=>({}));console.error("Failed to create event",t),t?.errors?ea(t.errors):alert("Failed to create event: "+(t?.error||e.status))}}catch(e){console.error(e),alert("Failed to create event")}finally{es(!1)}},children:[(0,c.jsx)("input",{type:"text",value:Y,onChange:e=>{J(e.target.value),ea(e=>{let t={...e};return delete t.title,t})},placeholder:"Event Title",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-slate-700 dark:text-white"}),en.title&&(0,c.jsx)("p",{className:"text-sm text-red-600 mt-1",children:en.title}),(0,c.jsx)("input",{type:"datetime-local",value:G,onChange:e=>{Q(e.target.value),ea(e=>{let t={...e};return delete t.startsAt,t})},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-slate-700 dark:text-white"}),en.startsAt&&(0,c.jsx)("p",{className:"text-sm text-red-600 mt-1",children:en.startsAt}),(0,c.jsx)("input",{type:"datetime-local",value:ee,onChange:e=>{et(e.target.value),ea(e=>{let t={...e};return delete t.endsAt,t})},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-slate-700 dark:text-white"}),en.endsAt&&(0,c.jsx)("p",{className:"text-sm text-red-600 mt-1",children:en.endsAt}),(0,c.jsx)("input",{type:"text",value:X,onChange:e=>Z(e.target.value),placeholder:"Location",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-slate-700 dark:text-white"}),(0,c.jsx)("textarea",{value:V,onChange:e=>q(e.target.value),placeholder:"Description",rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-slate-700 dark:text-white"}),(0,c.jsxs)("div",{className:"flex gap-3",children:[(0,c.jsx)(E.Button,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"Create"}),(0,c.jsx)(E.Button,{type:"button",variant:"outline",onClick:()=>K(!1),children:"Cancel"})]})]})]}),(0,c.jsx)("div",{className:"space-y-3",children:L.map(e=>(0,c.jsxs)(tw.Card,{className:"bg-white dark:bg-slate-800 p-4 flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),(0,c.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.startsAt?new Date(e.startsAt).toLocaleString():""})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(E.Button,{size:"sm",variant:"outline",onClick:async()=>{try{let t=await fetch(`/api/events/signups?eventId=${e.id}`,{credentials:"include"});if(t.ok){let n=await t.json();_(t=>({...t,[e.id]:n?.signups||[]})),z(e.id),H(!0)}else{let e=await t.json().catch(()=>({}));alert("Failed to load signups: "+(e?.error||t.status))}}catch(e){console.error(e),alert("Failed to load signups")}},children:(0,c.jsx)(C.Eye,{className:"w-4 h-4"})}),(0,c.jsx)(E.Button,{size:"sm",variant:"outline",children:(0,c.jsx)(v.Edit2,{className:"w-4 h-4"})}),(0,c.jsx)(E.Button,{size:"sm",variant:"outline",className:"text-red-600 border-red-200 bg-transparent",onClick:()=>eD(e.id),children:(0,c.jsx)(y,{className:"w-4 h-4"})})]})]},e.id))}),W&&$&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-slate-800 w-[min(900px,95%)] max-h-[80vh] overflow-auto p-6 rounded shadow-lg",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsxs)("h3",{className:"text-xl font-semibold",children:["Signups for ",L.find(e=>e.id===$)?.title||""]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(E.Button,{className:"bg-green-600 hover:bg-green-700",onClick:async()=>{if(confirm(`Send reminder emails to all ${(B[$]||[]).length} signup(s)?`))try{let e=await fetch("/api/events/signups/send-reminder",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:$})}),t=await e.json();e.ok?alert(t.message||`Sent ${t.sent} reminder(s) successfully`):alert("Failed to send reminders: "+(t?.error||e.status))}catch(e){console.error(e),alert("Failed to send reminders")}},children:"Send Reminders to All"}),(0,c.jsx)(E.Button,{variant:"outline",onClick:()=>{let e=new Blob([[["Name","Email","Phone","Created At"],...(B[$]||[]).map(e=>[e.name,e.email,e.phone||"",e.createdAt?new Date(e.createdAt).toISOString():""])].map(e=>e.map(e=>`"${String(e||"").replace(/"/g,'""')}"`).join(",")).join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=`signups_${$}.csv`,document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(t)},children:"Export CSV"}),(0,c.jsx)(E.Button,{variant:"outline",onClick:()=>{H(!1),z(null)},children:"Close"})]})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(B[$]||[]).map(e=>(0,c.jsxs)(tw.Card,{className:"p-3 flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"font-medium",children:[e.name," ",(0,c.jsx)("span",{className:"text-sm text-gray-500",children:e.email})]}),(0,c.jsx)("p",{className:"text-sm text-gray-500",children:e.phone||""})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"text-sm text-gray-400 mr-4",children:e.createdAt?new Date(e.createdAt).toLocaleString():""}),(0,c.jsx)(E.Button,{size:"sm",variant:"destructive",onClick:async()=>{if(confirm("Remove this signup?"))try{let t=await fetch("/api/events/signups",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})});if(t.ok)_(t=>({...t,[$]:(t[$]||[]).filter(t=>t.id!==e.id)}));else{let e=await t.json().catch(()=>({}));alert("Failed to remove signup: "+(e?.error||t.status))}}catch(e){console.error(e),alert("Failed to remove signup")}},children:"Remove"})]})]},e.id)),0===(B[$]||[]).length&&(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"No signups yet."})]})]})})]}),"volunteers"===i&&(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsx)("div",{className:"flex items-center justify-between",children:(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Volunteer Applications"})}),(0,c.jsxs)("div",{className:"space-y-3",children:[ei.map(e=>(0,c.jsxs)(tw.Card,{className:"bg-white dark:bg-slate-800 p-4 flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),(0,c.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.email," â€¢ ",e.roleTitle||e.roleId]}),(0,c.jsxs)("p",{className:"text-sm text-gray-500",children:["Status: ",e.status]}),e.adminMessage&&(0,c.jsxs)("p",{className:"text-sm text-gray-500",children:["Message: ",e.adminMessage]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(E.Button,{size:"sm",className:"bg-green-600",onClick:async()=>{let t=prompt("Optional message to the applicant (approval note)");try{let n=await fetch("/api/volunteers",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,action:"approve",message:t})});if(n.ok)eo(n=>n.map(n=>n.id===e.id?{...n,status:"approved",adminMessage:t}:n));else{let e=await n.json().catch(()=>({}));alert("Failed to approve: "+(e?.error||n.status))}}catch(e){console.error(e),alert("Failed to approve")}},children:"Approve"}),(0,c.jsx)(E.Button,{size:"sm",className:"bg-red-600",onClick:async()=>{let t=prompt("Message to applicant (reason for rejection)");if(null!==t)try{let n=await fetch("/api/volunteers",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,action:"reject",message:t})});if(n.ok)eo(n=>n.map(n=>n.id===e.id?{...n,status:"rejected",adminMessage:t}:n));else{let e=await n.json().catch(()=>({}));alert("Failed to reject: "+(e?.error||n.status))}}catch(e){console.error(e),alert("Failed to reject")}},children:"Reject"})]})]},e.id)),0===ei.length&&(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"No volunteer applications yet."})]})]}),"suggestions"===i&&(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Suggestions"}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[em>0&&(0,c.jsxs)("span",{className:"text-sm text-white bg-red-600 rounded-full px-2 py-0.5",children:[em," new"]}),(0,c.jsx)(E.Button,{size:"sm",onClick:async()=>{try{let e=await fetch("/api/suggestions",{credentials:"include"});if(e.ok){let t=await e.json();ec(t?.suggestions||[]);let n=new Date().toISOString();try{localStorage.setItem("adminSuggestionsLastSeen",n)}catch(e){}eu(n),ep(0)}else{let t=await e.json().catch(()=>({}));alert("Failed to refresh suggestions: "+(t?.error||e.status))}}catch(e){console.error(e),alert("Failed to refresh suggestions")}},children:"Refresh"})]})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[el.map(e=>(0,c.jsxs)(tw.Card,{className:"bg-white dark:bg-slate-800 p-4 flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:[e.type," from ",e.name||e.email]}),(0,c.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.message}),e.adminResponse&&(0,c.jsxs)("p",{className:"text-sm text-gray-500",children:["Response: ",e.adminResponse," ",e.responderName?(0,c.jsxs)("span",{className:"text-xs text-gray-400",children:["(by ",e.responderName,")"]}):null]})]}),(0,c.jsx)("div",{className:"flex items-center gap-2",children:(0,c.jsx)(E.Button,{size:"sm",onClick:()=>{ex(e.id),ey(e.email||null),ej(e.name||null),eN(e.adminResponse||""),eh(!0)},children:"Respond"})})]},e.id)),0===el.length&&(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"No suggestions yet."})]})]}),(0,c.jsx)(tf,{open:ef,onOpenChange:e=>{e||(ex(null),eN("")),eh(e)},children:(0,c.jsxs)(tx,{children:[(0,c.jsx)(tv,{children:(0,c.jsx)(tb,{children:"Respond to Suggestion"})}),(0,c.jsxs)("div",{className:"mt-2 space-y-3",children:[(0,c.jsx)("div",{children:(0,c.jsx)(tj,{className:"w-full min-h-[200px]",value:ew,onChange:e=>{eN(e.target.value),eC&&eE(null)},placeholder:"Write your response to the suggestion here"})}),eC&&(0,c.jsx)("p",{className:"text-sm text-red-600 mt-2",children:eC})]}),(0,c.jsxs)(ty,{children:[(0,c.jsx)(E.Button,{variant:"outline",onClick:()=>{eh(!1),eE(null)},children:"Cancel"}),(0,c.jsx)(E.Button,{disabled:ek||0===ew.trim().length,onClick:async()=>{if(eg){if(0===ew.trim().length)return void eE("Response cannot be empty");eS(!0),eE(null);try{let e=await fetch("/api/suggestions",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:eg,response:ew,responderName:n})});if(e.ok)ec(e=>e.map(e=>e.id===eg?{...e,adminResponse:ew,respondedAt:new Date().toISOString(),responderName:n||"You"}:e)),eh(!1),ex(null),ey(null),ej(null),eN(""),eA({title:"Response sent",description:"Your reply was delivered to the user."});else{let t=await e.json().catch(()=>({})),n=t?.error||`Status ${e.status}`;eE("Failed to send response: "+n)}}catch(e){console.error(e),eE("Network or server error")}finally{eS(!1)}}},children:ek?"Sending...":"Send Response"})]})]})}),"settings"===i&&(0,c.jsx)(tS,{adminName:n,toast:eA})]})]})]})}function tS({adminName:e,toast:t}){let[n,a]=(0,d.useState)(""),[r,s]=(0,d.useState)(""),[i,o]=(0,d.useState)(!1),[l,u]=(0,d.useState)(!1);async function m(){o(!0);try{let e=await fetch("/api/settings",{credentials:"include"}),t=await e.json();t?.settings&&(a(String(t.settings.activeMembers||"")),s(String(t.settings.ministryPartnerships||"")))}catch(e){console.error("Failed to load settings",e)}finally{o(!1)}}async function p(){u(!0);try{(await fetch("/api/settings",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({activeMembers:Number(n)||0,ministryPartnerships:Number(r)||0})})).ok?t({title:"Settings saved",description:"Church statistics have been updated."}):t({title:"Error",description:"Failed to save settings",variant:"destructive"})}catch(e){console.error("Failed to save settings",e),t({title:"Error",description:"Network error",variant:"destructive"})}finally{u(!1)}}return((0,d.useEffect)(()=>{m()},[]),i)?(0,c.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,c.jsx)("div",{className:"text-gray-500",children:"Loading settings..."})}):(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Church Settings"}),(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage church statistics displayed on the About page"})]}),(0,c.jsx)(tw.Card,{className:"p-6",children:(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Active Members"}),(0,c.jsx)("input",{type:"number",value:n,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"2000",min:"0"}),(0,c.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Number of active church members"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ministry Partnerships"}),(0,c.jsx)("input",{type:"number",value:r,onChange:e=>s(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",placeholder:"50",min:"0"}),(0,c.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Number of ministry partnerships"})]}),(0,c.jsxs)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,c.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mb-4",children:(0,c.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(0,c.jsx)("strong",{children:"Note:"})," Years Serving is automatically calculated from Feb 7, 2020 (founding date). Weekly Programs count is automatically calculated from scheduled events in the next 7 days."]})}),(0,c.jsx)(E.Button,{onClick:p,disabled:l,className:"w-full sm:w-auto",children:l?"Saving...":"Save Settings"})]})]})})]})}e.s(["default",()=>tk],55404)}]);