(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7839],{8818:(e,t,r)=>{Promise.resolve().then(r.bind(r,2746))},2746:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(926),s=r(5822),d=r(1695),l=r(666),i=r.n(l),n=r(6893),c=r(9407),o=r(3525),u=r(2862),x=r(843);let m=(0,r(350).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);var h=r(2323);function g(){let e=(0,d.useRouter)(),t=(0,d.useSearchParams)(),[r,l]=(0,s.useState)(t.get("email")||""),[g,b]=(0,s.useState)(""),[y,f]=(0,s.useState)(""),[p,k]=(0,s.useState)(!1),[j,v]=(0,s.useState)(!1),[N,w]=(0,s.useState)("input"),S=async e=>{if(e.preventDefault(),!r){f("Please enter your email address");return}w("verify"),f("")},C=async t=>{t.preventDefault(),f(""),v(!0);try{let t=await fetch("/api/auth/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,verificationCode:g})}),a=await t.json();if(!t.ok){f(a.error||"Verification failed");return}k(!0),a.token&&sessionStorage.setItem("token",a.token),setTimeout(()=>{e.push("/dashboard")},2e3)}catch(e){f("An error occurred. Please try again.")}finally{v(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white dark:from-slate-950 dark:to-slate-900",children:[(0,a.jsx)(n.MainNav,{}),(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-64px)] px-4 py-8",children:(0,a.jsx)(c.Zp,{className:"w-full max-w-md p-8",children:p?(0,a.jsxs)("div",{className:"text-center space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(u.A,{className:"w-16 h-16 text-green-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-2",children:"Email Verified!"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Your email has been successfully verified. You're all set to explore the church community!"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Redirecting to your dashboard..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)(x.A,{className:"w-12 h-12 text-blue-600 dark:text-blue-400"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-blue-900 dark:text-white mb-2",children:"Verify Your Email"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"input"===N?"Enter your email address to get started":"We've sent a verification code to your email"})]}),(0,a.jsxs)("form",{onSubmit:"input"===N?S:C,className:"space-y-5",children:["input"===N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),(0,a.jsx)("input",{type:"email",value:r,onChange:e=>l(e.target.value),placeholder:"you@example.com",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsx)(o.$,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded-lg transition",children:"Continue"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:[(0,a.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,a.jsx)("strong",{children:"Email:"})," ",r]}),(0,a.jsx)("button",{type:"button",onClick:()=>w("input"),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline mt-2",children:"Change email"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verification Code"}),(0,a.jsx)("input",{type:"text",value:g,onChange:e=>b(e.target.value.toUpperCase()),placeholder:"000000",maxLength:6,className:"w-full px-4 py-3 text-center text-2xl font-bold tracking-widest rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Check your email for the 6-digit code"})]}),(0,a.jsx)(o.$,{type:"submit",disabled:j||6!==g.length,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-2 rounded-lg transition",children:j?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(m,{className:"w-4 h-4 animate-spin"}),"Verifying..."]}):"Verify Email"})]}),y&&(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg p-4 flex gap-3",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:y}),"Invalid verification code"===y&&(0,a.jsx)("p",{className:"text-xs text-red-600 dark:text-red-300 mt-1",children:"Please check the code and try again"})]})]})]}),(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:["Haven't registered yet?"," ",(0,a.jsx)(i(),{href:"/signup",className:"text-blue-600 dark:text-blue-400 hover:underline font-semibold",children:"Sign up here"})]})})]})})})]})}function b(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}),children:(0,a.jsx)(g,{})})}},9407:(e,t,r)=>{"use strict";r.d(t,{BT:()=>n,Wu:()=>c,ZB:()=>i,Zp:()=>d,aR:()=>l});var a=r(926);r(5822);var s=r(2178);function d(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...r})}function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...r})}function c(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...r})}},2323:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(350).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2862:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(350).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},843:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(350).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},1695:(e,t,r)=>{"use strict";var a=r(5159);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},e=>{var t=t=>e(e.s=t);e.O(0,[1085,666,13,9274,8304,6683,7358],()=>t(8818)),_N_E=e.O()}]);