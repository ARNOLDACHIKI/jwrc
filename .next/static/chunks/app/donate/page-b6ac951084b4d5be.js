(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[272],{7111:(e,a,t)=>{Promise.resolve().then(t.bind(t,4721))},4721:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var r=t(926),s=t(5822),l=t(6893),n=t(9407),o=t(3525),d=t(350);let i=(0,d.A)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var c=t(6384),m=t(6994);let x=(0,d.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),u=[{amount:500,label:"KES 500",description:"Support general operations"},{amount:1e3,label:"KES 1,000",description:"Help community outreach"},{amount:2500,label:"KES 2,500",description:"Support missions & ministry"},{amount:5e3,label:"KES 5,000",description:"Premium partnership"}],h=[{id:"mpesa",name:"M-Pesa (Paybill)",icon:i,description:"Mobile money payment via Paybill (Kenya)",color:"text-green-600"}];function p(){var e;let[a,t]=(0,s.useState)(1e3),[d,i]=(0,s.useState)(""),[p,b]=(0,s.useState)("mpesa"),[y,g]=(0,s.useState)({name:"",email:"",phone:"",message:""}),[j,f]=(0,s.useState)(!1),[N,v]=(0,s.useState)(null),[k,w]=(0,s.useState)(!1),[P,S]=(0,s.useState)(null),M=d?Number.parseFloat(d):a,C=async()=>{if(!y.name||!y.email){alert("Please fill in your name and email");return}if(!M||Number.isNaN(M)||M<=0){alert("Please enter a donation amount in KES");return}if("mpesa"===p&&!y.phone){alert("Please enter your phone number for M-Pesa STK Push (e.g. 2547XXXXXXXX)");return}if(f(!0),"mpesa"===p){let s=Math.max(1,Math.round(M||0));try{let l=await fetch("/api/mpesa/stk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:y.phone,amount:s,accountReference:"377899",transactionDesc:"Donation"})}),n=await l.json().catch(()=>({}));if(l.ok){var e,a,t,r;(null==n?void 0:null===(e=n.provider)||void 0===e?void 0:e.CheckoutRequestID)||null==n||null===(a=n.provider)||void 0===a||a.checkoutRequestID,(null==n?void 0:null===(t=n.provider)||void 0===t?void 0:t.MerchantRequestID)||null==n||null===(r=n.provider)||void 0===r||r.merchantRequestID,v((null==n?void 0:n.localId)||null),w(!0),S("STK Push sent. Please enter your M-Pesa PIN on your phone to complete the payment.")}else{if(console.warn("STK Push failed",n),!confirm("STK Push failed to initiate. You can still pay manually via M-Pesa Paybill:\n\nPaybill: 247247\nAccount No: 377899\n\nClick OK after you complete the payment to mark as paid.")){f(!1);return}await fetch("/api/donations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:s,method:"mpesa",currency:"KES",kesAmount:s,donor:y,note:"Manual Paybill fallback"})}).catch(()=>null),alert("Recorded manual donation attempt. We will confirm once payment is verified.")}}catch(e){if(console.error("STK request error",e),!confirm("Could not start STK Push due to a network error. Please use M-Pesa Paybill:\n\nPaybill: 247247\nAccount No: 377899\n\nClick OK after you complete the payment to mark as paid.")){f(!1);return}await fetch("/api/donations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:s,method:"mpesa",currency:"KES",kesAmount:s,donor:y,note:"Manual Paybill fallback (network error)"})}).catch(()=>null),alert("Recorded manual donation attempt. We will confirm once payment is verified.")}}f(!1)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white dark:from-slate-950 dark:to-slate-900",children:[(0,r.jsx)(l.MainNav,{}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,r.jsx)(c.A,{className:"w-8 h-8 text-red-600"}),(0,r.jsx)("h1",{className:"text-4xl font-bold text-blue-900 dark:text-white",children:"Support Our Mission"}),(0,r.jsx)(c.A,{className:"w-8 h-8 text-red-600"})]}),(0,r.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Your generous donation helps us continue our ministry, community outreach, and spiritual growth programs."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,r.jsxs)(n.Zp,{className:"p-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-6",children:"Select Amount (KES)"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:u.map(e=>(0,r.jsxs)("button",{onClick:()=>{t(e.amount),i("")},className:"p-4 rounded-lg border-2 transition ".concat(a!==e.amount||d?"border-gray-200 dark:border-gray-700 hover:border-blue-300":"border-blue-600 bg-blue-50 dark:bg-blue-900/20"),children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.label}),(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e.description})]},e.amount))}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Or enter custom amount"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:"KES"}),(0,r.jsx)("input",{type:"number",value:d,onChange:e=>{i(e.target.value),t(0)},placeholder:"0.00",className:"flex-1 px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,r.jsxs)(n.Zp,{className:"p-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-6",children:"Your Information"}),(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),(0,r.jsx)("input",{type:"text",value:y.name,onChange:e=>g({...y,name:e.target.value}),placeholder:"John Doe",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),(0,r.jsx)("input",{type:"email",value:y.email,onChange:e=>g({...y,email:e.target.value}),placeholder:"john@example.com",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number (M-Pesa)"}),(0,r.jsx)("input",{type:"tel",value:y.phone,onChange:e=>g({...y,phone:e.target.value}),placeholder:"2547XXXXXXXX",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prayer Request or Message (Optional)"}),(0,r.jsx)("textarea",{value:y.message,onChange:e=>g({...y,message:e.target.value}),placeholder:"Share your prayer request or message...",rows:4,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]})]})]}),(0,r.jsxs)(n.Zp,{className:"p-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-6",children:"Payment Method"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(e=>{let a=e.icon;return(0,r.jsxs)("button",{onClick:()=>b(e.id),className:"p-6 rounded-lg border-2 transition text-left ".concat(p===e.id?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(a,{className:"w-6 h-6 ".concat(e.color)}),(0,r.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white",children:e.name})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]},e.id)})})]})]}),(0,r.jsx)("div",{children:(0,r.jsxs)(n.Zp,{className:"p-8 sticky top-20",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-blue-900 dark:text-white mb-6",children:"Donation Summary"}),(0,r.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("span",{children:"Amount:"}),(0,r.jsxs)("span",{className:"font-bold text-gray-900 dark:text-white",children:["KES ",Math.max(0,M).toFixed(0)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("span",{children:"Method:"}),(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:null===(e=h.find(e=>e.id===p))||void 0===e?void 0:e.name})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 flex justify-between",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Total:"}),(0,r.jsxs)("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["KES ",Math.max(0,M).toFixed(0)]})]})]}),(0,r.jsxs)("div",{className:"p-4 mb-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-slate-800",children:[(0,r.jsx)("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Pay via M-Pesa (Paybill)"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use your M-Pesa app or STK Push to pay to our Paybill."}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Paybill"}),(0,r.jsx)("div",{className:"font-mono font-semibold text-lg",children:"247247"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Account No"}),(0,r.jsx)("div",{className:"font-mono font-semibold text-lg",children:"377899"})]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:"When prompted, enter your name or email in the account reference so we can match your donation. After payment, click 'Proceed to Payment' and confirm to mark as paid."})]})]}),(0,r.jsxs)(o.$,{onClick:C,disabled:j||!M,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg mb-4",children:[j?"Processing...":"Proceed to Payment",(0,r.jsx)(m.A,{className:"w-4 h-4 ml-2"})]}),k&&(0,r.jsxs)("div",{className:"p-4 rounded-lg border border-yellow-300 bg-yellow-50 dark:bg-yellow-900/20 text-sm",children:[(0,r.jsx)("p",{className:"font-semibold mb-2",children:P}),(0,r.jsx)("p",{className:"mb-3",children:"Do not enter your M-Pesa PIN on this website — enter it only on your phone when prompted by M-Pesa."}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(o.$,{onClick:async()=>{if(N)try{var e,a;let t=await fetch("/api/mpesa/status?localId=".concat(N)),r=await t.json().catch(()=>({})),s=(null==r?void 0:null===(e=r.donation)||void 0===e?void 0:e.status)||(null==r?void 0:null===(a=r.donation)||void 0===a?void 0:a.state)||"unknown";alert("Current payment status: ".concat(s)),"success"===s&&(w(!1),S("Payment confirmed. Thank you!"))}catch(e){alert("Could not fetch status")}},className:"bg-blue-600 hover:bg-blue-700 text-white",children:"I've entered PIN — Check status"}),(0,r.jsx)(o.$,{onClick:()=>{w(!1),v(null),S(null)},variant:"outline",children:"Cancel"})]})]}),(0,r.jsxs)("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3 font-medium",children:"YOUR DONATION IS SECURE"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(x,{className:"w-4 h-4 text-green-600"}),(0,r.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Encrypted & secure"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(x,{className:"w-4 h-4 text-green-600"}),(0,r.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"100% tax deductible"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(x,{className:"w-4 h-4 text-green-600"}),(0,r.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Receipt emailed"})]})]})]})]})})]})]})]})}},9407:(e,a,t)=>{"use strict";t.d(a,{BT:()=>d,Wu:()=>i,ZB:()=>o,Zp:()=>l,aR:()=>n});var r=t(926);t(5822);var s=t(2178);function l(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t})}function n(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})}function o(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",a),...t})}function d(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",a),...t})}function i(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",a),...t})}},6994:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(350).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},6384:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(350).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[1085,666,13,9274,8304,6683,7358],()=>a(7111)),_N_E=e.O()}]);