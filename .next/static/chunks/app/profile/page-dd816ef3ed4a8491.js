(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6636],{7569:(e,l,t)=>{Promise.resolve().then(t.bind(t,6654))},6654:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>j});var a=t(926),r=t(5822),s=t(666),i=t.n(s),n=t(7356),d=t(6893),o=t(9407),c=t(3525),x=t(1091),m=t(4968),u=t(9255),g=t(843),h=t(7284),b=t(1580);let f=(0,t(350).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var p=t(7548);function j(){let{user:e,updateProfile:l,isLoading:t}=(0,x.J)(),[s,j]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[N,k]=(0,r.useState)(""),[w,A]=(0,r.useState)(""),[M,S]=(0,r.useState)({name:(null==e?void 0:e.name)||"",email:(null==e?void 0:e.email)||"",phone:(null==e?void 0:e.phone)||"",location:(null==e?void 0:e.location)||"",bio:(null==e?void 0:e.bio)||"",profileImage:(null==e?void 0:e.profileImage)||""}),[C,I]=(0,r.useState)(""),[P,T]=(0,r.useState)([]),[B,L]=(0,r.useState)(!1),[D,E]=(0,r.useState)({rotateX:0,rotateY:0}),[Y,z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&(S({name:e.name||"",email:e.email||"",phone:e.phone||"",location:e.location||"",bio:e.bio||"",profileImage:e.profileImage||""}),I(e.profileImage||""))},[e]),(0,r.useEffect)(()=>{if(!(null==e?void 0:e.email))return;let l=!1;return async function(){L(!0);try{let t=await fetch("/api/volunteers?email=".concat(encodeURIComponent(e.email))),a=await t.json().catch(()=>({}));l||T(Array.isArray(null==a?void 0:a.applications)?a.applications:[])}catch(e){l||T([])}finally{l||L(!1)}}(),()=>{l=!0}},[null==e?void 0:e.email]);let G=async()=>{y(!0),k(""),A("");try{await l({name:M.name,email:M.email,phone:M.phone,location:M.location,bio:M.bio,profileImage:M.profileImage}),A("Profile updated"),j(!1)}catch(e){k((null==e?void 0:e.message)||"Failed to save changes")}finally{y(!1)}},R=(null==e?void 0:e.joinDate)?new Date(e.joinDate).getFullYear():"",V=P[0],X=(null==e?void 0:e.isVolunteer)?"approved":(null==V?void 0:V.status)||"none",_="approved"===X?"Thank you for serving our community!":"pending"===X?"Your application is under review. We will notify you soon.":"rejected"===X?(null==V?void 0:V.adminMessage)||"We could not approve this application.":"Interested in volunteering? Sign up today!";return t&&!e?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-center text-gray-500",children:"Loading your profile..."})}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-950",children:[(0,a.jsx)(d.MainNav,{}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(n.B,{}),(0,a.jsx)("main",{className:"flex-1 overflow-auto",children:(0,a.jsxs)("div",{className:"p-6 md:p-8 max-w-4xl",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-blue-900 dark:text-white",children:"My Profile"})}),(0,a.jsxs)(o.Zp,{className:"overflow-hidden mb-8",children:[(0,a.jsx)("div",{style:{perspective:"1000px"},children:(0,a.jsxs)("div",{onMouseMove:e=>{if(!Y)return;let l=e.currentTarget.getBoundingClientRect(),t=l.width/2,a=l.height/2,r=e.clientX-l.left;E({rotateX:(a-(e.clientY-l.top))/a*8,rotateY:(r-t)/t*8})},onMouseEnter:()=>{z(!0)},onMouseLeave:()=>{z(!1),E({rotateX:0,rotateY:0})},className:"h-40 relative overflow-hidden bg-gradient-to-b from-slate-900 to-slate-800 dark:from-slate-950 dark:to-slate-900 transition-transform duration-200",style:{transform:"perspective(1000px) rotateX(".concat(D.rotateX,"deg) rotateY(").concat(D.rotateY,"deg) translateZ(20px)"),transformStyle:"preserve-3d"},children:[(0,a.jsxs)("svg",{className:"absolute inset-0 w-full h-full",preserveAspectRatio:"none",viewBox:"0 0 1200 160",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("filter",{id:"glow",children:[(0,a.jsx)("feGaussianBlur",{stdDeviation:"1.5",result:"coloredBlur"}),(0,a.jsxs)("feMerge",{children:[(0,a.jsx)("feMergeNode",{in:"coloredBlur"}),(0,a.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})}),(0,a.jsx)("path",{d:"M0,60 Q150,20 300,60 T600,60 T900,60 T1200,60",stroke:"rgba(34, 211, 238, 0.4)",strokeWidth:"2",fill:"none",filter:"url(#glow)"}),(0,a.jsx)("path",{d:"M0,80 Q150,40 300,80 T600,80 T900,80 T1200,80",stroke:"rgba(34, 211, 238, 0.3)",strokeWidth:"2",fill:"none",filter:"url(#glow)"}),(0,a.jsx)("path",{d:"M0,100 Q150,60 300,100 T600,100 T900,100 T1200,100",stroke:"rgba(6, 182, 212, 0.25)",strokeWidth:"2",fill:"none",filter:"url(#glow)"}),(0,a.jsx)("circle",{cx:"50",cy:"55",r:"2",fill:"rgba(34, 211, 238, 0.6)",filter:"url(#glow)"}),(0,a.jsx)("circle",{cx:"120",cy:"40",r:"1.5",fill:"rgba(34, 211, 238, 0.5)"}),(0,a.jsx)("circle",{cx:"200",cy:"50",r:"2",fill:"rgba(6, 182, 212, 0.6)",filter:"url(#glow)"}),(0,a.jsx)("circle",{cx:"280",cy:"65",r:"1.5",fill:"rgba(34, 211, 238, 0.5)"}),(0,a.jsx)("circle",{cx:"350",cy:"55",r:"2",fill:"rgba(34, 211, 238, 0.6)",filter:"url(#glow)"}),(0,a.jsx)("circle",{cx:"450",cy:"35",r:"1.5",fill:"rgba(6, 182, 212, 0.5)"}),(0,a.jsx)("circle",{cx:"550",cy:"60",r:"2",fill:"rgba(34, 211, 238, 0.6)",filter:"url(#glow)"}),(0,a.jsx)("circle",{cx:"650",cy:"50",r:"1.5",fill:"rgba(34, 211, 238, 0.5)"}),(0,a.jsx)("circle",{cx:"750",cy:"65",r:"2",fill:"rgba(6, 182, 212, 0.6)",filter:"url(#glow)"}),(0,a.jsx)("circle",{cx:"850",cy:"45",r:"1.5",fill:"rgba(34, 211, 238, 0.5)"}),(0,a.jsx)("circle",{cx:"950",cy:"58",r:"2",fill:"rgba(34, 211, 238, 0.6)",filter:"url(#glow)"}),(0,a.jsx)("circle",{cx:"1050",cy:"48",r:"1.5",fill:"rgba(6, 182, 212, 0.5)"}),(0,a.jsx)("circle",{cx:"1150",cy:"62",r:"2",fill:"rgba(34, 211, 238, 0.6)",filter:"url(#glow)"})]}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-slate-900/40 to-slate-900/80"})]})}),(0,a.jsxs)("div",{className:"px-6 pb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between -mt-16 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-end gap-4",children:[(0,a.jsx)("div",{className:"w-32 h-32 rounded-lg border-4 border-white dark:border-slate-900 bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center overflow-hidden relative",children:e.profileImage?(0,a.jsx)("img",{src:e.profileImage,alt:e.name,className:"w-full h-full object-cover"}):(0,a.jsx)("span",{className:"text-4xl font-bold text-white",children:e.name.charAt(0)})}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.name}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 capitalize",children:[e.role," • Joined ",R||"-"]})]})]}),(0,a.jsxs)("button",{onClick:()=>j(!s),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 hover:bg-blue-200 dark:hover:bg-blue-900/50 transition",children:[s?(0,a.jsx)(m.A,{className:"w-4 h-4"}):(0,a.jsx)(u.A,{className:"w-4 h-4"}),s?"Cancel":"Edit"]})]}),s?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Profile Picture"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center overflow-hidden",children:C?(0,a.jsx)("img",{src:C,alt:"Preview",className:"w-full h-full object-cover"}):(0,a.jsx)("span",{className:"text-2xl font-bold text-white",children:M.name.charAt(0)||"?"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var l;let t=null===(l=e.target.files)||void 0===l?void 0:l[0];if(t){if(t.size>5242880){k("Image must be less than 5MB");return}let e=new FileReader;e.onloadend=()=>{let l=e.result;I(l),S({...M,profileImage:l})},e.readAsDataURL(t)}},className:"w-full text-sm text-gray-600 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/20 dark:file:text-blue-400"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"JPG, PNG or GIF (max 5MB)"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),(0,a.jsx)("input",{type:"text",value:M.name,onChange:e=>S({...M,name:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",value:M.email,onChange:e=>S({...M,email:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone"}),(0,a.jsx)("input",{type:"tel",value:M.phone,onChange:e=>S({...M,phone:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),(0,a.jsx)("input",{type:"text",value:M.location,onChange:e=>S({...M,location:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),(0,a.jsx)("textarea",{value:M.bio,onChange:e=>S({...M,bio:e.target.value}),rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800"})]}),N&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:N}),w&&(0,a.jsx)("p",{className:"text-sm text-green-600",children:w}),(0,a.jsxs)(c.$,{onClick:G,disabled:v,className:"w-full bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(f,{className:"w-4 h-4 mr-2"}),v?"Saving...":"Save Changes"]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Contact Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(g.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.email})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.phone||"Add your phone number"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(b.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.location||"Add your city"})]})]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-white dark:bg-slate-800 border",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Bio"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm whitespace-pre-line",children:e.bio||"Share a short introduction about yourself."})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-900",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-blue-900 dark:text-blue-400",children:"approved"===X?"✓ Active Volunteer":"pending"===X?"Application Pending":"rejected"===X?"Application Not Approved":"Not a Volunteer"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:_}),"approved"!==X&&(0,a.jsx)("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-2",children:"pending"===X&&(null==V?void 0:V.createdAt)?"Submitted on ".concat(new Date(V.createdAt).toLocaleDateString()):"rejected"===X&&(null==V?void 0:V.respondedAt)?"Reviewed on ".concat(new Date(V.respondedAt).toLocaleDateString()):""})]}),(0,a.jsx)(i(),{href:"/volunteer",className:"px-3 py-2 text-sm font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"approved"===X?"View roles":"Sign up"})]}),B&&(0,a.jsx)("p",{className:"text-xs text-blue-600 mt-2",children:"Checking your volunteer status..."})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 rounded-lg bg-white dark:bg-slate-800 border",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Inbox & Messages"}),(0,a.jsx)("div",{children:(0,a.jsx)(p.A,{email:e.email})})]})]})]})]})]})})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Please log in to view profile"}),(0,a.jsx)(i(),{href:"/login",children:(0,a.jsx)(c.$,{children:"Go to Login"})})]})})}},843:(e,l,t)=>{"use strict";t.d(l,{A:()=>a});let a=(0,t(350).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},1580:(e,l,t)=>{"use strict";t.d(l,{A:()=>a});let a=(0,t(350).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9255:(e,l,t)=>{"use strict";t.d(l,{A:()=>a});let a=(0,t(350).A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},7284:(e,l,t)=>{"use strict";t.d(l,{A:()=>a});let a=(0,t(350).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])}},e=>{var l=l=>e(e.s=l);e.O(0,[1085,666,13,9274,4845,8304,6683,7358],()=>l(7569)),_N_E=e.O()}]);